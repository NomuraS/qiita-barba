<!DOCTYPE html>
<html>

<head>
    <title>Barba.jsテスト</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>

<body>
    header - unchange
    <ul>
        <li>
            <a href="./page2.html">link to page2</a>
        </li>
        <li>
            <a href="./page1.html">link to page1</a>
        </li>
    </ul>
    <main id="barba-wrapper">
        <div class="barba-container">
            ここを変更する。
        </div>
    </main>
    footer - unchange
</body>
<script>
    // Bara.js
    Barba.Pjax.init();
    // 事前読み込み
    Barba.Prefetch.init();
    // フェードアウトのアニメーション
    var FadeTransition = Barba.BaseTransition.extend({
  start: function() {

    Promise
      .all([this.newContainerLoading, this.fadeOut()])
      .then(this.fadeIn.bind(this));
  },

  fadeOut: function() {
    return $(this.oldContainer).animate({ opacity: 0 }).promise();
  },

  fadeIn: function() {

    var _this = this;
    var $el = $(this.newContainer);

    $(this.oldContainer).hide();

    $el.css({
      visibility : 'visible',
      opacity : 0
    });

    $el.animate({ opacity: 1 }, 400, function() {
      _this.done();
    });
  }
});
Barba.Pjax.getTransition = function() {
  return FadeTransition;
};

</script>

</html>